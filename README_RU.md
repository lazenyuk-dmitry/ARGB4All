# Arduino argb PC

Возмозны ситуации когда у вас на ПК достаточно хорошая материнская плата,
но она не умеет управлять подсветкой ARGB. Этот проект пытается решить эту проблему.

Проект состоит из двух частей *ПРОШИВКА* и [GUI](https://github.com/lazenyuk-dmitry/ARGB4All_GUI) для управления подсветкой и настройки.

Изначально идея в том чтобы подключить микро контроллер Arduino к USB на материнской плате внутри корпуса ПК.
Но можно использовать и по другому, все ограничено только вашей фантазией.

- Необходимые детали
- Немного о подключении к материнской плате
- Схема подключения
- Делитель напряжения

## Необходимые детали

Иметь все необходимое не обязательно, можно и просто подключить провода так как вы хотите. Но лучше и удобнее найти все нужные коннекторы в интернет магазинах.

Существует два типа коннекторов ЖЕНСКИЙ(FEMALE) - как правило не имеет штырей для соединения, и МУЖСКОЙ(MALE) - имеет штыри для соединения.

- *Arduino Pro Micro* или *Arduino Leaonardo*. *Arduino Pro Micro* предпочтительнее в виду своих компактных размеров. Так же можно адаптировать прошивку для других МК на *ATmega32U4*.

- ARGB коннектор на 3 пина для подсветки 5V. Можно найти на маркетплейсах как ARGB разветвитель.
  Использовать можно как мужской так и женский разьем так как на вентеляторах часто пресутсткует оба типа подключения.
  Но лучше взять мужской, это ближе к тому как реализованно на материнских платах.

  ![ARGB female connector](_images/ARGB-5v-4pin-female.jpg)
  ![ARGB male connector](_images/ARGB-5v-4pin-male.jpg)
  ![ARGB splitter](_images/ARGB-5v-4pin-splitter.jpg)

- MOLEX коннектор. Обычно с блока питания идет женский разьем, поэтому нам нужен мужской. *Лучше проверить какой коннектор у вас*.
  Это соединение нужно для того чтобы можно было проверить включен сейчас ПК или нет. Так же можно найти на маркетплейсах.

  ![MOLEX](_images/MOLEX.jpg)

- Кабель USB A/Micro USB, можно использовать кабель от ардуино.

- Коннектор USB 2.0 для подключения к материнской плате. Нужен только женский разьем без штырей.
  Не обязательно использовать такое соединение, есть и другие варианты, читайте здесь *Немного о подключении к материнской плате*.
  Можно найти на маркет плейсах как *Переходник для материнской платы USB 2.0*.

  ![USB2.0](_images/USB2.0.jpg)

- Резистор номиналом 10 кОм

- Ну и самоустройство с ARGB подсветкой которое будет подключаться.

## Немного о подключении к материнской плате

Подключать микро контроллер ручше внитри корпуса ПК, к USB 2.0 разьему на материнской плате. Но ничто не мешает подключить просто в USB порт ПК.

Вот так обычно выглядит разьем на материнской плате (обычно внизу, на краю платы):

![USB-motherboad](_images/USB-motherboad.jpg)

А вот подключение к USB материской платы:

![USB-motherboad](_images/USB-motherboad-connected.jpg)

Можно использовать вот такой коннектор:

![USB2.0](_images/USB2.0.jpg)

А можно купить вот такие модули расширения и тогда не придется ничего паять:

![USB2.0 module](_images/USB-motherboad-module.jpg)

А можно и разветвители найти если вам мало портов USB:

![USB2.0 splitter](_images/USB-motherboad-splitter.jpg)

*Все то же самое можно найти и подключить в USB 3.0 на материнской плате. Но более выгодно занять один медленный USB 2.0 порт.*

## Схема подключения

*Обратите внимание что изначально без сигнала на пине **2** светодиоды светиться не будут!*

![Arduino Pro Micro connection](_images/pro_micro_connection.jpg)

Сигнальный провод (Power signal HIGTH/LOW) подключается к MOLEX идущему от блока питания.
Это нужно для определения включен ли сейчас ПК и отключения подсветки если ПК выключен.
Определение включеного состояния идет по LOW сигналу на пине *2*, тоесть во включеном состоянии на *красном* проводе MOLEX когда ПК включен должно быть напряжение +5V.
Если напряжение отсутствует, тогда подсветка будет отключена.

*Будьте внимательны на MOLEX подается +5V (красный провод) и +12V (желтый провод). Arduino работает только с напряжением 5V, и привышение этого напряжения может убить микроконтроллер*.

Распиновка MOLEX разьема:

![MOLEX Pinouts](_images/MOLEX-pinouts.jpg)

## Делитель напряжения

Лучше и безопаснее отслеживать питание на линии 5V.
Но возможно что некоторые блоки питания не отключают линию +5V и тогда нужно будет отслеживать линию 12V, для этого нужно собрать или купить **делитель напряжения**

Дклитель напряжения 12V -> 4.8V на резисторах 100 Ом и 68 Ом.

![Voltage divider](_images/voltage_divider.jpg)

*Можно использовать резисторы другого номинала если расчитать резисторы в каком нибудь онлайн калькуляторе. Например 100 кOм и 68 кОм или 10 Ом и 6.8 Ом*.

Или можно преобрести уже готовые преобразователи и делители напряжения.

## Настройка [config.h](/src/config.h)

#### Основные настройки:

`#define NUM_LEDS 60` - количество светодиодов в ленте. в нашем случае в подсветке вентелятора, ОЗУ и тд.

`#define POWER_PIN 2` - пин используется для определения состояния главного устройства (квлючено/отключено).

`#define DATA_PIN 3` - пин для управления светодиодами. Предпочтительно пины с PWM (D3, D5, D6, D9, D10, D16).



#### Преднастройки по умолчанию:

`#define DEFAULT_COLOR CRGB::Blue` - цвет светодиодов.

`#define DEFAULT_BRIGTHNESS 255` - яркость светодиодов.
